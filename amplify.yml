version: 1
frontend:
  phases:
    preBuild:
      commands:
        # ðŸ§¹ Ensure a clean environment
        - npm install --legacy-peer-deps
        # Optional: show Node/NPM versions for debugging
        - node -v
        - npm -v

    build:
      commands:
        # ðŸ§± Run the Vite build (uses vite.config.js in project root)
        - npm run build

  artifacts:
    # ðŸ“¦ Correct build output folder for your structure
    baseDirectory: frontend/dist
    files:
      - '**/*'

  cache:
    # âš¡ Cache node_modules for faster builds
    paths:
      - node_modules/**/*
